<section>
<div class="bage-title">
<div class="container">
    <div class="row align-items-center justify-content-center">
        <div class="col-md-8 p-4">
            <div class="">
                <h1>Recipes <span>Item</span></h1>
                <p>
                    You can now add your items that any user can order it <br>
                    from the Application and you can edit
                </p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="text-end">
                <img src="../../../../../../../assets/imags/eating-avatar.svg" alt="">
            </div>
        </div>
    </div>
</div>
</div>
<div>
<div class="nav d-flex align-items-center justify-content-between">
    <div class="one">
        <h4 class="m-0">Recipes Table Details</h4>
        <p class="m-0">You can check all details</p>
    </div>
    <div class="two">
        <button class="primary-but" routerLink="addRecipe">Add New Recipes</button>
    </div>
</div>



<div class="search-container">
<!-- Input Search -->
<mat-form-field appearance="outline" class="search-field">
    <mat-label>Search By Recipe</mat-label>
<mat-icon matPrefix>search</mat-icon>
<input 
    matInput 
    [(ngModel)]="searchName"
    (keydown.enter)="onGetgRecipesDate()"
    placeholder="Search here ..."
    name="search"
/>
</mat-form-field>

<!-- Select Dropdown (Tag) -->
<mat-form-field appearance="outline" class="tag-select">
    <mat-label>Tag</mat-label>
<mat-select [(ngModel)]="tagId" (selectionChange)="onGetgRecipesDate()" name="tag">
    <mat-option *ngFor="let tag of tagList" [value]="tag.id">
    {{ tag.name }}
    </mat-option>
</mat-select>
</mat-form-field>

<!-- Select Dropdown (Category) -->
<mat-form-field appearance="outline" class="tag-select">
    <mat-label>Categorey</mat-label>
    <mat-select [(ngModel)]="categId" (selectionChange)="onGetgRecipesDate()" name="category">
    <mat-option *ngFor="let category of categoriesList" [value]="category.id">
        {{ category.name }}
    </mat-option>
    </mat-select>
</mat-form-field>

<!-- Clear Button as Icon -->
<button type="button" class="clear-btn" (click)="clearFilters()">
    <i class="fa-solid fa-xmark"></i>
</button>      
</div>
<table class="w-100 table table-striped">
    <thead class="table-secondary">
        <tr>
            <th>Item Name</th>
            <th>Image</th>
            <th>Price</th>
            <th>Description</th>
            <th>tag</th>
            <th>Category</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let recipe of recipesList">
            <td>{{recipe.name }}</td>
            <td class="w-25"><img [src]="imageSrc + recipe.imagePath" class="w-50" alt=""></td>
            <td>{{recipe.price }}</td>
            <td>{{recipe.description }}</td>
            <td>{{recipe.tag.name }}</td>
            <td>
                <ng-container *ngFor="let category of recipe.category">
                    {{category.name }}
                </ng-container>
                
            </td>
            <td>
                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                <button  mat-menu-item [routerLink]="['viewRecipe', recipe.id, true]">
                    <mat-icon style="color: #4aa35a;">visibility</mat-icon>
                    <span>View</span>
                </button>
                <button  mat-menu-item [routerLink]="['editRecipe', recipe.id]">
                    <mat-icon style="color: #4aa35a;">edit_square</mat-icon>
                    <span>Edit</span>
                </button>
                <button  mat-menu-item (click)="onDeleteDialog(recipe)">
                    <mat-icon style="color: #4aa35a;">delete</mat-icon>
                    <span>Delete</span>
                </button>
                </mat-menu>
            </td>
        </tr>
    </tbody>
</table>
</div>
</section>
